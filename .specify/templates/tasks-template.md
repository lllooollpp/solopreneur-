---
description: "功能实现任务列表模板"
---

# 任务列表：[功能名称]

**输入**：来自 `/specs/[###-feature-name]/` 的设计文档
**前置条件**：plan.md（必需）、spec.md（用户故事必需）、research.md、data-model.md、contracts/

**测试**：下面的示例包含测试任务。测试是可选的 - 仅在功能规范中明确要求时才包含。

**组织方式**：任务按用户故事分组，以支持每个故事的独立实现和测试。

## 格式：`[ID] [P?] [故事] 描述`

- **[P]**：可以并行运行（不同文件，无依赖关系）
- **[故事]**：此任务属于哪个用户故事（例如，US1、US2、US3）
- 在描述中包含确切的文件路径

## 路径约定

- **单一项目**：在仓库根目录下的 `src/`、`tests/`
- **Web 应用**：`backend/src/`、`frontend/src/`
- **移动应用**：`api/src/`、`ios/src/` 或 `android/src/`
- 下面显示的路径假设为单一项目 - 根据 plan.md 结构进行调整

<!-- 
  ============================================================================
  重要提示：下面的任务是仅用于说明目的的示例任务。
  
  /speckit.tasks 命令必须根据以下内容替换这些任务：
  - 来自 spec.md 的用户故事（及其优先级 P1、P2、P3...）
  - 来自 plan.md 的功能需求
  - 来自 data-model.md 的实体
  - 来自 contracts/ 的端点
  
  任务必须按用户故事组织，以便每个故事可以：
  - 独立实现
  - 独立测试
  - 作为 MVP 增量交付
  
  请不要在生成的 tasks.md 文件中保留这些示例任务。
  ============================================================================
-->

## 阶段 1：设置（共享基础设施）

**目的**：项目初始化和基本结构

- [ ] T001 根据实现计划创建项目结构
- [ ] T002 设置开发环境和依赖项
- [ ] T003 创建 README.md 和基本文档
- [ ] T004 设置版本控制和 .gitignore
- [ ] T005 创建基本 CI/CD 管道（如果计划中指定）
- [ ] T006 设置日志记录和错误处理框架

## 阶段 2：基础（所有故事的依赖项）

**目的**：所有用户故事共享的基础组件

- [ ] T007 创建所有故事依赖的基础模型/实体
- [ ] T008 设置数据库连接和迁移（如适用）
- [ ] T009 创建共享工具和辅助函数
- [ ] T010 设置身份验证/授权框架（如需要）

**检查点**：基础就绪 - 用户故事实现现在可以并行开始

## 阶段 3：用户故事 1（优先级：P1）

**目标**：[用户故事 1 的简要描述]

**独立测试**：[如何独立测试此故事]

### 测试任务（如果要求）
> **注意：首先编写这些测试，确保在实现前它们失败**

- [ ] T011 [P] [US1] 在 tests/test_[功能].py 中编写用户故事 1 的验收测试

### 实现任务

- [ ] T012 [P] [US1] 在 src/models/[entity1].py 中创建 [Entity1] 模型
- [ ] T013 [P] [US1] 在 src/models/[entity2].py 中创建 [Entity2] 模型
- [ ] T014 [US1] 在 src/services/[service].py 中实现核心业务逻辑
- [ ] T015 [US1] 在 src/controllers/[controller].py 中创建 API 端点（如适用）
- [ ] T016 [US1] 添加验证和错误处理
- [ ] T017 [US1] 为用户故事 1 操作添加日志记录

**检查点**：此时，用户故事 1 应该完全可用并可独立测试

### 集成任务

- [ ] T018 [US1] 集成 [Entity1] 与现有系统
- [ ] T019 [US1] 更新文档以反映新功能

## 阶段 4：用户故事 2（优先级：P2）

**目标**：[用户故事 2 的简要描述]

**独立测试**：[如何独立测试此故事]

### 测试任务（如果要求）

- [ ] T020 [P] [US2] 在 tests/test_[功能].py 中编写用户故事 2 的验收测试

### 实现任务

- [ ] T021 [P] [US2] 在 src/models/[entity].py 中创建 [Entity] 模型
- [ ] T022 [US2] 实现用户故事 2 的业务逻辑
- [ ] T023 [US2] 创建必要的 API 端点
- [ ] T024 [US2] 添加用户故事 2 特定的验证

**检查点**：此时，用户故事 1 和 2 都应该独立工作

## 阶段 5：用户故事 3（优先级：P3）

**目标**：[用户故事 3 的简要描述]

**独立测试**：[如何独立测试此故事]

### 测试任务（如果要求）

- [ ] T025 [P] [US3] 在 tests/test_[功能].py 中编写用户故事 3 的验收测试

### 实现任务

- [ ] T026 [P] [US3] 在 src/models/[entity].py 中创建 [Entity] 模型
- [ ] T027 [US3] 实现用户故事 3 的业务逻辑
- [ ] T028 [US3] 添加所需的集成点

**检查点**：所有用户故事现在都应该独立功能

## [根据需要添加更多用户故事阶段，遵循相同模式]

## 最终阶段：完善与跨领域关注

**目的**：最终完善和生产就绪

- [ ] TXXX [P] 在 docs/ 中更新文档
- [ ] TXXX [P] 语言核查：确保所有新增的日志、UI 文本符合中文化标准
- [ ] TXXX [P] 性能优化（如识别瓶颈）
- [ ] TXXX [P] 在 tests/unit/ 中添加额外的单元测试（如果要求）
- [ ] TXXX [P] 安全审查和强化（如子 Agent 沙箱验证）
- [ ] TXXX [P] 最终集成测试
- [ ] TXXX 生产部署准备

## 依赖关系

**用户故事完成顺序：**
1. 设置 + 基础 → 基础就绪
2. 用户故事 1 → 独立测试 → 部署/演示（MVP！）
3. 用户故事 2 → 独立测试 → 部署/演示
4. 用户故事 3 → 独立测试 → 部署/演示
5. 每个故事在不破坏先前故事的情况下增加价值

## 并行执行示例

**单个用户故事内的并行性：**
示例用户故事 1 任务：
- 任务："在 src/models/[entity1].py 中创建 [Entity1] 模型"
- 任务："在 src/models/[entity2].py 中创建 [Entity2] 模型"
- 任务："在 tests/test_[功能].py 中编写验收测试"

**步骤：**
1. 并行工作：T012、T013、T011（不同文件）
2. 然后：T014（需要模型）
3. 然后：T015、T016、T017（可以并行）
4. **停止并验证**：独立测试用户故事 1
5. 如果准备就绪，部署/演示

**递增交付策略：**
1. 完成设置 + 基础 → 基础就绪
2. 添加用户故事 1 → 独立测试 → 部署/演示（MVP！）
3. 添加用户故事 2 → 独立测试 → 部署/演示
4. 添加用户故事 3 → 独立测试 → 部署/演示
5. 每个故事在不破坏先前故事的情况下增加价值

## 实现策略

### MVP 优先方法
- 从最高优先级用户故事（P1）开始
- 每个故事完成后立即测试和验证
- 在继续下一个故事之前部署可工作的增量
- 在任何检查点停止以独立验证故事
- 每个故事都应该为用户提供可见的价值

### 质量保证
- 所有任务都包含明确的文件路径
- 每个阶段都有明确定义的完成标准
- 测试任务在实现任务之前编写
- 定期检查点确保独立故事功能
- 文档与代码更改保持同步
## 最终阶段：完善与跨领域关注

**目的**：最终完善和生产就绪

- [ ] TXXX [P] 在 docs/ 中更新文档
- [ ] TXXX [P] 语言核查：确保所有新增的日志、UI 文本符合中文化标准
- [ ] TXXX [P] 性能优化（如识别瓶颈）
- [ ] TXXX [P] 在 tests/unit/ 中添加额外的单元测试（如果要求）
- [ ] TXXX [P] 安全审查和强化（如子 Agent 沙箱验证）
- [ ] TXXX [P] 最终集成测试
- [ ] TXXX 生产部署准备

## 依赖关系

### 阶段依赖

- **设置（阶段 1）**：无依赖关系 - 可以立即开始
- **基础（阶段 2）**：取决于设置完成 - 阻止所有用户故事
- **用户故事（阶段 3+）**：都取决于基础阶段的完成
  - 用户故事可以并行进行（如果有人力资源）
  - 或按优先级顺序进行（P1 → P2 → P3）
- **完善（最终阶段）**：取决于所有所需用户故事的完成

### 用户故事依赖

- **用户故事 1（P1）**：在基础阶段（阶段 2）完成后可以开始 - 不依赖于其他故事
- **用户故事 2（P2）**：在基础阶段（阶段 2）完成后可以开始 - 可能与 US1 集成但应该独立可测试
- **用户故事 3（P3）**：在基础阶段（阶段 2）完成后可以开始 - 可能与 US1/US2 集成但应该独立可测试

### 每个用户故事内部

- 测试（如果包含）必须在实现之前编写并失败
- 模型在服务之前
- 服务在端点之前
- 核心实现在集成之前
- 故事完成后才能进行下一个优先级

### 并行机会

- 所有标记为 [P] 的设置任务可以并行运行
- 所有标记为 [P] 的基础任务可以并行运行（在阶段 2 内）
- 基础阶段完成后，所有用户故事可以并行开始（如果团队有能力）
- 所有标记为 [P] 的用户故事测试可以并行运行
- 故事中标记为 [P] 的模型可以并行运行
- 不同的用户故事可以由不同的团队成员并行处理

---

## 并行示例：用户故事 1

```bash
# 同时启动用户故事 1 的所有测试（如果请求测试）：
任务："在 tests/contract/test_[name].py 中的 [endpoint] 的合同测试"
任务："在 tests/integration/test_[name].py 中进行 [user journey] 的集成测试"

# 同时启动用户故事 1 的所有模型：
任务："在 src/models/[entity1].py 中创建 [Entity1] 模型"
任务："在 src/models/[entity2].py 中创建 [Entity2] 模型"
```

---

## 实现策略

### MVP 优先方法（仅用户故事 1）

1. 完成阶段 1：设置
2. 完成阶段 2：基础（关键 - 阻止所有故事）
3. 完成阶段 3：用户故事 1
4. **停止并验证**：独立测试用户故事 1
5. 准备就绪后部署/演示

### 递增交付

1. 完成设置 + 基础 → 基础就绪
2. 添加用户故事 1 → 独立测试 → 部署/演示（MVP！）
3. 添加用户故事 2 → 独立测试 → 部署/演示
4. 添加用户故事 3 → 独立测试 → 部署/演示
5. 每个故事都添加价值而不破坏以前的故事

### 并行团队策略

拥有多个开发人员时：

1. 团队一起完成设置 + 基础
2. 基础完成后：
   - 开发人员 A：用户故事 1
   - 开发人员 B：用户故事 2
   - 开发人员 C：用户故事 3
3. 故事完成并独立集成

---

## 注释

- [P] 任务 = 不同的文件，无依赖关系
- [故事] 标签将任务映射到特定用户故事以进行可追踪性
- 每个用户故事应该是独立可完成和可测试的
- 在实现之前验证测试失败
- 在每个任务或逻辑组后提交
- 在任何检查点停止以独立验证故事
- 避免：模糊的任务、相同文件冲突、破坏独立性的跨故事依赖关系
