---
name: architecture
description: "è½¯ä»¶æ¶æ„è®¾è®¡ã€‚å½“éœ€è¦è®¾è®¡ç³»ç»Ÿæ¶æ„ã€æŠ€æœ¯é€‰å‹ã€API è®¾è®¡ã€æ•°æ®å»ºæ¨¡ã€ç»˜åˆ¶æ¶æ„å›¾æ—¶ä½¿ç”¨æ­¤æŠ€èƒ½ã€‚"
metadata: {"nanobot":{"emoji":"ğŸ—ï¸","always":false}}
---

# æ¶æ„è®¾è®¡æŠ€èƒ½

## è®¾è®¡æ–‡æ¡£æ¨¡æ¿

```markdown
# [ç³»ç»Ÿåç§°] æ¶æ„è®¾è®¡æ–‡æ¡£

## 1. æ¶æ„æ¦‚è§ˆ
[æ–‡å­—æè¿° + Mermaid ç»„ä»¶å›¾]

## 2. æŠ€æœ¯é€‰å‹
| é¢†åŸŸ | é€‰å‹ | ç†ç”± | æ›¿ä»£æ–¹æ¡ˆ |
|------|------|------|---------|
| è¯­è¨€ | Python 3.11+ | ... | Go, Node.js |

## 3. æ¨¡å—è®¾è®¡
### æ¨¡å—A
- èŒè´£:
- æ¥å£:
- ä¾èµ–:

## 4. API è®¾è®¡
### POST /api/v1/resource
- Request Body: { ... }
- Response 200: { ... }
- Response 400: { ... }

## 5. æ•°æ®æ¨¡å‹
[ER å›¾ / å­—æ®µå®šä¹‰]

## 6. éƒ¨ç½²æ¶æ„
[éƒ¨ç½²æ‹“æ‰‘å›¾]

## 7. æŠ€æœ¯é£é™©
| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|---------|
```

## æ¶æ„å›¾ (Mermaid è¯­æ³•)

### åˆ†å±‚æ¶æ„
```
graph TB
    UI[å‰ç«¯å±‚] --> API[API ç½‘å…³]
    API --> BIZ[ä¸šåŠ¡é€»è¾‘å±‚]
    BIZ --> DAL[æ•°æ®è®¿é—®å±‚]
    DAL --> DB[(æ•°æ®åº“)]
```

### å¾®æœåŠ¡æ¶æ„
```
graph LR
    GW[API Gateway] --> S1[ç”¨æˆ·æœåŠ¡]
    GW --> S2[è®¢å•æœåŠ¡]
    GW --> S3[æ”¯ä»˜æœåŠ¡]
    S1 --> DB1[(UserDB)]
    S2 --> DB2[(OrderDB)]
    S2 --> MQ[æ¶ˆæ¯é˜Ÿåˆ—]
    MQ --> S3
```

### åºåˆ—å›¾
```
sequenceDiagram
    Client->>API: POST /login
    API->>AuthService: validate(credentials)
    AuthService->>DB: query user
    DB-->>AuthService: user record
    AuthService-->>API: JWT token
    API-->>Client: 200 { token }
```

## API è®¾è®¡è§„èŒƒ

### RESTful çº¦å®š
- `GET /resources` - åˆ—è¡¨
- `POST /resources` - åˆ›å»º
- `GET /resources/{id}` - è¯¦æƒ…
- `PUT /resources/{id}` - å…¨é‡æ›´æ–°
- `PATCH /resources/{id}` - éƒ¨åˆ†æ›´æ–°
- `DELETE /resources/{id}` - åˆ é™¤

### å“åº”æ ¼å¼
```json
{
  "code": 0,
  "message": "success",
  "data": { ... },
  "meta": { "page": 1, "total": 100 }
}
```

### é”™è¯¯å“åº”
```json
{
  "code": 40001,
  "message": "å‚æ•°æ ¡éªŒå¤±è´¥",
  "details": [
    { "field": "email", "message": "æ ¼å¼ä¸æ­£ç¡®" }
  ]
}
```

## è®¾è®¡åŸåˆ™é€ŸæŸ¥

| åŸåˆ™ | å«ä¹‰ | åº”ç”¨åœºæ™¯ |
|------|------|---------|
| SRP | å•ä¸€èŒè´£ | æ¯ä¸ªæ¨¡å—/ç±»åªåšä¸€ä»¶äº‹ |
| OCP | å¼€é—­åŸåˆ™ | æ‰©å±•å¼€æ”¾ï¼Œä¿®æ”¹å…³é—­ |
| DIP | ä¾èµ–å€’ç½® | ä¾èµ–æŠ½è±¡ä¸ä¾èµ–å…·ä½“ |
| ISP | æ¥å£éš”ç¦» | ç»†ç²’åº¦æ¥å£ |
| LSP | é‡Œæ°æ›¿æ¢ | å­ç±»å¯æ›¿æ¢çˆ¶ç±» |

## è¯»å–ç°æœ‰ä»£ç 

åˆ†æé¡¹ç›®æ¶æ„æ—¶:
1. `list_dir` äº†è§£ç›®å½•ç»“æ„
2. `read_file` è¯»å– `pyproject.toml` / `package.json` äº†è§£ä¾èµ–
3. `read_file` è¯»å–å…¥å£æ–‡ä»¶å’Œé…ç½®
4. `exec` è¿è¡Œ `find . -name "*.py" | head -50` äº†è§£ä»£ç è§„æ¨¡
